(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{3:function(e,t,a){},5:function(e,t,a){e.exports=a.p+"static/media/places-logo.bb94eb64.png"},68:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(4),c=a.n(r),l=(a(3),a(8)),i=a(1),u=a(5),s=a.n(u);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("a",{className:"logo",href:"https://places-buterina.netlify.app/"},o.a.createElement("img",{className:"logo__image",src:s.a,alt:"Places Logo"})))};var m=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa92022. Places"))},d=o.a.createContext();var _=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,r=e.onCardDelete,c=o.a.useContext(d),l=t.owner._id===c._id,i="card__delete-button ".concat(l?"card__delete-button_visible":"card__delete-button_hidden"),u=t.likes.some(function(e){return e._id===c._id}),s="".concat(u?"card__like-button_filled":"card__like-button");return o.a.createElement("li",{className:"card"},o.a.createElement("img",{className:"card__photo",src:t.link,alt:t.name,onClick:function(){a(t)}}),o.a.createElement("button",{className:i,type:"button","aria-label":"Delete",onClick:function(){r(t)}}),o.a.createElement("div",{className:"card__place"},o.a.createElement("h2",{className:"card__title"},t.name),o.a.createElement("div",{className:"card__likes"},o.a.createElement("button",{className:s,type:"button",onClick:function(){n(t)},"aria-label":"Like"}),o.a.createElement("span",{className:"card__like-count"},t.likes.length))))};var f=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,r=e.onCardClick,c=e.onCardLike,l=e.onCardDelete,i=e.cards,u=o.a.useContext(d);return o.a.createElement("main",{className:"main"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__photo"},o.a.createElement("img",{className:"profile__avatar",src:u.avatar,alt:"Avatar"}),o.a.createElement("button",{className:"profile__avatar-button",type:"button","aria-label":"Edit avatar",onClick:n})),o.a.createElement("div",{className:"profile__description"},o.a.createElement("div",{className:"profile__name"},o.a.createElement("h1",{className:"profile__title"},u.name),o.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"Edit profile",onClick:t})),o.a.createElement("p",{className:"profile__bio"},u.about))),o.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"Add card",onClick:a})),o.a.createElement("section",{className:"cards"},o.a.createElement("ul",{className:"cards__gallery"},i.map(function(e){return o.a.createElement(_,{key:e._id,card:e,onCardClick:r,onCardLike:c,onCardDelete:l})}))))};var h=function(e){var t=e.card,a=e.onClose;return o.a.createElement("article",{className:"popup popup_type_photo ".concat(t.link&&"popup_opened")},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:a}),o.a.createElement("figure",{className:"popup__image"},o.a.createElement("img",{className:"popup__photo",src:t.link,alt:t.name}),o.a.createElement("figcaption",{className:"popup__caption"},t.name))))};var b=function(e){var t=e.name,a=e.title,n=e.children,r=e.buttonText,c=e.isOpen,l=e.onClose,i=e.onSubmit,u=e.buttonDisabled;return o.a.createElement("article",{className:"popup popup_type_".concat(t," ").concat(c&&"popup_opened")},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"Close",onClick:l}),o.a.createElement("h2",{className:"popup__title"},a),o.a.createElement("form",{className:"popup__form",name:t,onSubmit:i,noValidate:!0},n,o.a.createElement("button",{className:"popup__button",disabled:u,type:"submit"},r))))};var E=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=o.a.useContext(d),c=o.a.useState(""),l=Object(i.a)(c,2),u=l[0],s=l[1],p=o.a.useState(""),m=Object(i.a)(p,2),_=m[0],f=m[1];return o.a.useEffect(function(){s(r.name),f(r.about)},[r,t]),o.a.createElement(b,{name:"edit-profile",isOpen:t,onClose:a,buttonText:"Save",title:"Edit profile",onSubmit:function(e){e.preventDefault(),n({name:u,about:_})}},o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{className:"popup__input popup__input_type_name",value:u||"",onChange:function(e){s(e.target.value)},id:"name-input",type:"text",name:"name",placeholder:"Your name",minLength:"2",maxLength:"40",autoComplete:"off",required:!0}),o.a.createElement("span",{className:"popup__input-error name-input-error"})),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{value:_||"",onChange:function(e){f(e.target.value)},className:"popup__input popup__input_type_about",id:"bio-input",type:"text",name:"about",placeholder:"Your occupation",minLength:"2",maxLength:"200",autoComplete:"off",required:!0}),o.a.createElement("span",{className:"popup__input-error bio-input-error"}))))};var v=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=o.a.useRef();return o.a.createElement(b,{name:"edit-avatar",isOpen:t,onClose:a,buttonText:"Save",title:"Update avatar",onSubmit:function(e){e.preventDefault(),n({avatar:r.current.value})}},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{className:"popup__input popup__input_type_avatar",type:"url",name:"avatar",id:"avatar-input",placeholder:"Avatar link",autoComplete:"off",ref:r,required:!0}),o.a.createElement("span",{className:"popup__input-error avatar-input-error"})))};var C=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=o.a.useState(""),c=Object(i.a)(r,2),l=c[0],u=c[1],s=o.a.useState(""),p=Object(i.a)(s,2),m=p[0],d=p[1];return o.a.useEffect(function(){u(""),d("")},[t]),o.a.createElement(b,{name:"add-card",isOpen:t,onClose:a,buttonText:"Save",title:"New place",onSubmit:function(e){e.preventDefault(),n({name:l,link:m})}},o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{className:"popup__input popup__input_type_card-name",onChange:function(e){u(e.target.value)},value:l||"",type:"text",name:"place",id:"place-input",placeholder:"Place",autoComplete:"off",minLength:"2",maxLength:"30",required:!0}),o.a.createElement("span",{className:"popup__input-error place-input-error"})),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{className:"popup__input popup__input_type_card-link",onChange:function(e){d(e.target.value)},value:m||"",type:"url",name:"link",id:"link-input",placeholder:"Image link",autoComplete:"off",required:!0}),o.a.createElement("span",{className:"popup__input-error link-input-error"}))))};var N=function(e){var t=e.name,a=e.title,n=e.buttonText,r=e.isOpen,c=e.onClose,l=e.onSubmit;return e.card,o.a.createElement("article",{className:"popup popup_type_".concat(t," ").concat(r&&"popup_opened")},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{className:"popup__close-button",onClick:c,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),o.a.createElement("h2",{className:"popup__title"},a),o.a.createElement("form",{className:"popup__form popup__form_type_delete-confirm",name:t,onSubmit:function(e){e.preventDefault(),l()},noValidate:!0},o.a.createElement("button",{className:"popup__button",type:"submit"},n))))},k=a(6),g=a(7),y=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(k.a)(this,e),this._headers=n,this._baseUrl=a}return Object(g.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getProfile",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(function(t){return e._checkResponse(t)})}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(function(e){return t._checkResponse(e)})}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(function(t){return e._checkResponse(t)})}},{key:"editProfile",value:function(e,t){var a=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(function(e){return a._checkResponse(e)})}},{key:"addCard",value:function(e,t){var a=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(function(e){return a._checkResponse(e)})}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(function(e){return t._checkResponse(e)})}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:t?"DELETE":"PUT",headers:this._headers}).then(function(e){return a._checkResponse(e)})}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-37",headers:{authorization:"3e727ee1-ba8f-4f8d-8bd7-5fc4fbc0cf58","Content-Type":"application/json"}});var O=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),c=Object(i.a)(r,2),u=c[0],s=c[1],_=o.a.useState(!1),b=Object(i.a)(_,2),k=b[0],g=b[1],O=o.a.useState(!1),S=Object(i.a)(O,2),P=S[0],j=S[1],x=o.a.useState({name:"",link:""}),L=Object(i.a)(x,2),U=L[0],T=L[1],A=o.a.useState(""),D=Object(i.a)(A,2),w=D[0],R=D[1],F=o.a.useState({}),q=Object(i.a)(F,2),I=q[0],J=q[1],B=o.a.useState([]),G=Object(i.a)(B,2),H=G[0],V=G[1];o.a.useEffect(function(){Promise.all([y.getProfile(),y.getInitialCards()]).then(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];J(a),V(n)}).catch(function(e){console.log(e)})},[]);var Y=function(){n(!1),s(!1),g(!1),j(!1),T({name:"",link:""})};return o.a.createElement(d.Provider,{value:I},o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:"page__content"},o.a.createElement(p,null),o.a.createElement(f,{onEditProfile:function(){n(!0)},onAddPlace:function(){s(!0)},onEditAvatar:function(){g(!0)},onCardClick:function(e){T(e)},onCardLike:function(e){var t=e.likes.some(function(e){return e._id===I._id});y.changeLikeCardStatus(e._id,t).then(function(t){V(function(a){return a.map(function(a){return a._id===e._id?t:a})})}).catch(function(e){console.log(e)})},onCardDelete:function(e){j(!0),R(e)},cards:H}),o.a.createElement(m,null)),o.a.createElement(E,{isOpen:a,onClose:Y,onUpdateUser:function(e){var t=e.name,a=e.about;y.editProfile(t,a).then(function(e){J(e),Y()}).catch(function(e){console.log(e)})}}),o.a.createElement(v,{isOpen:k,onClose:Y,onUpdateAvatar:function(e){var t=e.avatar;y.updateAvatar(t).then(function(e){J(e),Y()}).catch(function(e){console.log(e)})}}),o.a.createElement(C,{isOpen:u,onClose:Y,onAddPlace:function(e){var t=e.name,a=e.link;y.addCard(t,a).then(function(e){V([e].concat(Object(l.a)(H))),Y()}).catch(function(e){console.log(e)})}}),o.a.createElement(h,{card:U,onClose:Y}),o.a.createElement(N,{name:"delete-confirm",isOpen:P,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",onClose:Y,onSubmit:function(){y.deleteCard(w._id).then(function(){V(function(e){return e.filter(function(e){return e._id!==w._id})}),Y()}).catch(function(e){console.log(e)})}})))},S=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,69)).then(function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),r(e),c(e)})};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),S()},9:function(e,t,a){e.exports=a(68)}},[[9,3,2]]]);
//# sourceMappingURL=main.51ee36b3.chunk.js.map